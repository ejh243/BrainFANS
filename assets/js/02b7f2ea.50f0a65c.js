"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[7285],{2109:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var i=t(5893),o=t(1151);const a={sidebar_position:3,title:"Examples of good and bad code",description:"Examples of good and bad code and what to comment on"},r="Examples of good and bad code",s={id:"Developer-information/Code-review/Code-examples",title:"Examples of good and bad code",description:"Examples of good and bad code and what to comment on",source:"@site/docs/Developer-information/Code-review/Code-examples.md",sourceDirName:"Developer-information/Code-review",slug:"/Developer-information/Code-review/Code-examples",permalink:"/BrainFANS/Developer-information/Code-review/Code-examples",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"Examples of good and bad code",description:"Examples of good and bad code and what to comment on"},sidebar:"developerSidebar",previous:{title:"Code Review - Best Practices",permalink:"/BrainFANS/Developer-information/Code-review/Best-practices"}},l={},c=[{value:"Design",id:"design",level:2},{value:"Functionality",id:"functionality",level:2},{value:"Complexity",id:"complexity",level:2},{value:"Understandability",id:"understandability",level:2},{value:"Readability",id:"readability",level:2},{value:"Maintainability",id:"maintainability",level:2},{value:"Comments",id:"comments",level:2},{value:"Scalability/Expandability",id:"scalabilityexpandability",level:2},{value:"Style",id:"style",level:2},{value:"Documentation",id:"documentation",level:2}];function d(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"examples-of-good-and-bad-code",children:"Examples of good and bad code"}),"\n",(0,i.jsxs)(n.p,{children:["When conducting a code review, there are many aspects the reviewer should be looking out for. These aspects have been laid out in ",(0,i.jsx)(n.a,{href:"/BrainFANS/Developer-information/Code-review/Conducting-a-code-review#what-to-look-for-in-a-code-review",children:"this list"}),". This page aims to give good and bad examples of code for each of the points on the list. Code is written in python as, ",(0,i.jsx)(n.em,{children:"generally"}),", python is easy to read for those new to programming. To keep consistency across code examples, all code will centre around the factorial function. If you have not heard of this function (or want a reminder), please follow ",(0,i.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Factorial",children:"this link"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"design",children:"Design"}),"\n",(0,i.jsxs)(n.p,{children:["This is a rather abstract concept and goes beyond the following example, the full description given in the ",(0,i.jsx)(n.a,{href:"/BrainFANS/Developer-information/Code-review/Conducting-a-code-review#what-to-look-for-in-a-code-review",children:"list"})," is more general than the example given."]}),"\n",(0,i.jsxs)(n.p,{children:["Suppose you have the file: ",(0,i.jsx)(n.code,{children:"main.py"}),". At some point in ",(0,i.jsx)(n.code,{children:"main.py"}),", the factorial function is required (for some calculation). Suppose further that ",(0,i.jsx)(n.code,{children:"main.py"})," is currently using an external package (like numpy) to source this function."]}),"\n",(0,i.jsxs)(n.p,{children:["Now assume that a new pull request is made where the contributor has made their own version of the factorial function, claiming that their version is better. This is an example of bad design. If the external, original version of the factorial function is used in other files, accepting this pull request would result in inconsistencies. In this specific example, the reprucussions would not be too bad. However, consider the same example but in a scenario where it wasn't a factorial function but a much more complex library of functions. It is highly unlikely that the newer code (written by the contributor) is better than the previously used code (that was probably written by a whole team of clever people). Even in the case the new code is objectively better (",(0,i.jsx)(n.em,{children:"e.g."})," faster), it may produce slightly different results to the original code that is used across the rest of the repository, introducing inconsistencies."]}),"\n",(0,i.jsx)(n.h2,{id:"functionality",children:"Functionality"}),"\n",(0,i.jsx)(n.p,{children:"The best way to check functionality is in testing the code yourself. Consider the below code blocks:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="non-functional code"',children:"# This function will not work as 'result' is not initialised before being\n# used in calculations\ndef factorial(n):\n    for i in range(1, n + 1):\n        result = result * i\n    return result\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="Good code"',children:"# The function now outputs the correct value but does not handle edge cases\n# such as the user inputting a letter instead of a number etc.\ndef factorial(n):\n    result = 1\n    for i in range(1, n + 1):\n        result = result * i\n    return result\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="Better code"',children:"# The function now outputs the correct value and accounts for the case\n# where the user does not input a non-negative integer\ndef factorial(n):\n    if not isinstance(n, int) or n < 0:\n        return None\n    result = 1\n    for i in range(1, n + 1):\n        result = result * i\n    return result\n"})}),"\n",(0,i.jsx)(n.h2,{id:"complexity",children:"Complexity"}),"\n",(0,i.jsx)(n.p,{children:"Code that is more complex than it needs to be is generally bad."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="highly complex code"',children:"import math\n\n# Don't worry about what this code does. In a nutshell the gamma function will \n# return the factorial function for x greater than or equal to 1. \n# However it is defined for all real numbers, not just non-negative integers.\n\n# Also note that this approximation of the gamma function isn't even very\n# accurate.\n\ndef gamma_function(x):\n    if x == 1:\n        return 1\n    elif x < 0.5:\n        return math.pi / (math.sin(math.pi * x) * gamma_function(1 - x))\n    else:\n        x -= 1\n        a = [0.99999999999980993, 676.5203681218851, -1259.1392167224028,\n             771.32342877765313, -176.61502916214059, 12.507343278686905,\n             -0.13857109526572012, 9.9843695780195716e-6, 1.5056327351493116e-7]\n        t = a[0]\n        for i in range(1, len(a)):\n            t += a[i] / (x + i)\n        return math.sqrt(2 * math.pi) * (x + 4.5) ** (x - 0.5) * math.exp(-x - 4.5) * t\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="Better code"',children:"# For most purposes, the below code does the exact same thing as the 'bad' code\n# Considering the below code is much less complex, it is viewed as better\ndef factorial(n):\n    result = 1\n    for i in range(1, n + 1):\n        result = result * i\n    return result\n"})}),"\n",(0,i.jsx)(n.h2,{id:"understandability",children:"Understandability"}),"\n",(0,i.jsx)(n.p,{children:"Understandability is inherently subjective. If the reviewer is unable to understand some code, it is likely not their fault, but the code's."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="Bad code"',children:"# This code is still doing the same computation, but the loop is now\n# much less understandable\ndef factorial(n):\n    result = 1\n    [result := result * i for i in range(1, n+1)]\n    return result\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="Better code"',children:"# In general, this is easier to understand\ndef factorial(n):\n    result = 1\n    for i in range(1, n + 1):\n        result = result * i\n    return result\n"})}),"\n",(0,i.jsx)(n.h2,{id:"readability",children:"Readability"}),"\n",(0,i.jsx)(n.p,{children:"Readability is inherently subjective. If the reviewer is unable to read some code (or gets lost), it is likely not their fault, but the code's."}),"\n",(0,i.jsx)(n.p,{children:"Typically understandability and readability go hand in hand, so a combinatation of the two should be considered."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="Bad code"',children:"# In general, this is hard to read as one does not have any context for what\n# f, n, i and r are\ndef f(n):\n    r = 1\n    for i in range(1, n + 1):\n        r *= i\n    return r\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="Better code"',children:"# In general, this is easier to understand\ndef factorial(n):\n    result = 1\n    for i in range(1, n + 1):\n        result = result * i\n    return result\n"})}),"\n",(0,i.jsxs)(n.admonition,{title:"too far the other way",type:"info",children:[(0,i.jsxs)(n.p,{children:["It should be noted that you can go too far the other way with 'readability' when it comes to naming code objects. Using too many words or being overly descriptive can paradoxically decrease code readability and understandability.\n",(0,i.jsx)(n.br,{}),"\n","The classic 'joke' is:"]}),(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"There are only two hard things in Computer Science: cache invalidation and naming things. - Phil Karlton"}),"\n"]})]}),"\n",(0,i.jsx)(n.h2,{id:"maintainability",children:"Maintainability"}),"\n",(0,i.jsxs)(n.p,{children:["Code that is maintainable would be easy for someone else to come along to the script (or source code) and make ammendments to it. We are going to stick with the factorial function here for consistency across examples. In order for this to make sense, we are going to reintroduce the error checking that was seen in ",(0,i.jsx)(n.a,{href:"#functionality",children:"functionality"}),". Recall that factorial is not defined for strings, non-integers and negative integers. Below we will make two functions that implement error handling in two ways."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="Bad code"',children:'# This is not only hard to read, but would you be comfortable changing this\n# code? In this scenario it is hard to follow the indentation and so making\n# changes might break the logic if you are not careful.\n\n# You can imagine that if the function was doing something more complex than\n# simply calculating the factorial, this would be even harder to maintain.\ndef factorial(n):\n    if isinstance(n, str):\n        if isinstance(n, int):\n            if n>=0:\n                result = 1\n                for i in range(1, n + 1):\n                    result = result * i\n                return result\n            else:\n                print("input must be non-negative")\n        else:\n            print("input must be an integer")\n    else:\n        print("input must be an integer")\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="Better code"',children:"# This code uses negation to remove the edge cases first, instead of nesting\n# the code deep into the function. With comments, this code might be even better\ndef factorial(n):\n    if not isinstance(n, int) or n < 0:\n        return None\n    result = 1\n    for i in range(1, n + 1):\n        result = result * i\n    return result\n"})}),"\n",(0,i.jsx)(n.p,{children:"Maintainability is not limited to deeply nested code, this is just one example of how code can be difficult to maintain due to it being poorly written."}),"\n",(0,i.jsx)(n.h2,{id:"comments",children:"Comments"}),"\n",(0,i.jsxs)(n.p,{children:["A good rule of thumb is comments explain ",(0,i.jsx)(n.em,{children:"why, not what"}),". To see the difference, the examples below have the same code, but the comments will either explain ",(0,i.jsx)(n.em,{children:"what"})," or ",(0,i.jsx)(n.em,{children:"why"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="Commenting on what"',children:"# Define the factorial function\ndef factorial(n):\n    # Checks if the input is not an integer or less than zero\n    if not isinstance(n, int) or n < 0:\n        # Returns None if the input is not an integer or less than zero\n        return None\n    # Initialises 'result' to be 1\n    result = 1\n    # Creates a loop that starts at index 1 and ends at index n+1\n    for i in range(1, n + 1):\n        # Multiplies 'result' by the current index of the for loop\n        result = result * i\n    # returns the result of the function\n    return result\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="Commenting on why"',children:'def factorial(n):\n    # The factorial function is not defined for non-negative integers,\n    # error handling is required in case the user does not enter such. \n    if not isinstance(n, int) or n < 0:\n        return None\n    result = 1\n    for i in range(1, n + 1):\n        # The factorial function is defined as: "The product of all integers\n        # up to the input".\n        result = result * i\n    return result\n'})}),"\n",(0,i.jsxs)(n.p,{children:['The above is obviously an egregious use of comments. Python is readable enough that none of the above comments are particularly required. However, hopefully you can see that explaining "',(0,i.jsx)(n.em,{children:"what"}),'" really does not help the reader.']}),"\n",(0,i.jsxs)(n.p,{children:["Sometimes, explaining ",(0,i.jsx)(n.em,{children:"what"})," the code does feel like a necessity. In such cases we refer back to our stance on ",(0,i.jsx)(n.a,{href:"#complexity",children:"complex code"}),". If the code is complex enough that ",(0,i.jsx)(n.em,{children:"what"}),"-based comments are required, then the code would likely benefit from being refactored. The exception to this is ",(0,i.jsx)(n.em,{children:"regular expressions"}),". If the code uses regex, then the comments should explain what the code is doing. Computers read regex, humans do not (well, not easily)."]}),"\n",(0,i.jsx)(n.h2,{id:"scalabilityexpandability",children:"Scalability/Expandability"}),"\n",(0,i.jsx)(n.p,{children:"Can the code be repurposed in a new context? Again, we are going to stick with the factorial function for simplicity, spotting scalability problems is usually rather difficult (without lots of domain knowledge)."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="Bad code"',children:"# ... Code ... #\n# ... Code ... #\n\nfactorial = 1\nfor i in range(1, 6):\n    factorial = factorial * i\nprint(factorial)\n\n\n# ... Code ... #\n# ... Code ... #\n\nfactorial = 1\nfor i in range(1, 11):\n    factorial = factorial * i\nprint(factorial)\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The above code is the same factorial function, but it is just being used inside the codebase for specific scenarios (here, it calculates 5! and 10!). This is not desirable as we can't reuse the factorial in other parts of the codebase easily. Here, you would need to copy and paste the code block and know that the ",(0,i.jsx)(n.code,{children:"range"})," needed to be changed to n+1 (to calculate n!)."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="Better code"',children:"# This function can be called from anywhere with 'factorial(n)' and is more\n# versatile\ndef factorial(n):\n    result = 1\n    for i in range(1, n + 1):\n        result = result * i\n    return result\n"})}),"\n",(0,i.jsxs)(n.admonition,{title:"Going too far the other way",type:"info",children:[(0,i.jsx)(n.p,{children:"Sometimes a line of code is very niche and is only required once in an entire codebase. You do not need to bundle every line of code into a function or a class method."}),(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["A good rule of thumb is the ",(0,i.jsx)(n.em,{children:"DRY"})," principle. That is ",(0,i.jsx)(n.em,{children:"Don't repeat yourself"}),"."]}),"\n"]}),(0,i.jsxs)(n.p,{children:["If code is repeated across a codebase (or ",(0,i.jsx)(n.em,{children:"will"})," be repeated in the ",(0,i.jsx)(n.strong,{children:"near"})," future), making such code scalable is beneficial for satisfying the other points on this list."]})]}),"\n",(0,i.jsx)(n.h2,{id:"style",children:"Style"}),"\n",(0,i.jsxs)(n.p,{children:["As mentioned ",(0,i.jsx)(n.a,{href:"/BrainFANS/Developer-information/Code-review/Conducting-a-code-review#style",children:"here"}),", style is usually down to personal preference and it can sometimes be difficult to separate views on style from readability. Style should only be taken into account if it helps with consistency across the codebase."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="Style inconsistencies"',children:"def some_function(i, j, k):\n     do_something()\n\ndef factorial(n):\n  result = 1\n  for i in range(1, n + 1):\n    result = result * i\n    return result\n\ndef some_other_function(l, m, n, o, p):\n          do_something()\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Above is a simple case where indentation changes throughout the codebase. Python does not actually care how many spaces are used for indentation (so the user could use 1 space, 2 spaces, 4, 5 ",(0,i.jsx)(n.em,{children:"etc."}),"). No number of spaces is technically correct, but consistency here makes the codebase more readable."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="Better code"',children:"def some_function(i, j, k):\n    do_something()\n\ndef factorial(n):\n    result = 1\n    for i in range(1, n + 1):\n        result = result * i\n    return result\n\ndef some_other_function(l, m, n, o, p):\n    do_something()\n"})}),"\n",(0,i.jsx)(n.p,{children:"The above is certainly more readable despite the individual lines of code being exactly the same between examples."}),"\n",(0,i.jsx)(n.h2,{id:"documentation",children:"Documentation"}),"\n",(0,i.jsxs)(n.p,{children:["As mentioned ",(0,i.jsx)(n.a,{href:"/BrainFANS/Developer-information/Code-review/Conducting-a-code-review#documentation",children:"here"}),", documentation is not really a requirement in a pull request. The relevant documentation can be changed at a later point in time if needs be. What does matter is the internal documentation of scripts (or source code). What we mean by this is a description of what a file does in the file preamble, or what a function does in its docstring. These are generally very useful to include in a codebase as it helps dramastically with its future use. In the event that a user or developer wants to find the correct file for their needs, high level descriptions of files, classes and functions will likely be incredibly useful to them."]}),"\n",(0,i.jsx)(n.p,{children:"Suppose that our factorial function is amongst a sea of other useful mathematical functions in a bigger python file. If the top of said file included a preamble, explaining the purpose of the file and who created it, future developers will have a much easier time working with the codebase. If no preamble was given, the factorial function might not be seen by future developers and they may end up creating the function themselves (which can be a waste of time with more complex functions)."})]})}function h(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>s,a:()=>r});var i=t(7294);const o={},a=i.createContext(o);function r(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);